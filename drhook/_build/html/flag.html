

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flags &amp; Environment variables &mdash; DrHook Manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            DrHook Manual
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Flags &amp; Environment variables</a><ul>
<li><a class="reference internal" href="#dr-hook-show-lock">DR_HOOK_SHOW_LOCK</a><ul>
<li><a class="reference internal" href="#valid-values">Valid Values</a></li>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#omp-stacksize">OMP_STACKSIZE</a><ul>
<li><a class="reference internal" href="#id4">Valid Values</a></li>
<li><a class="reference internal" href="#id5">Purpose</a></li>
<li><a class="reference internal" href="#id6">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-catch-signals">DR_HOOK_CATCH_SIGNALS</a><ul>
<li><a class="reference internal" href="#id9">Valid Values</a></li>
<li><a class="reference internal" href="#id10">Purpose</a></li>
<li><a class="reference internal" href="#id11">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-restore-default-signals">DR_HOOK_RESTORE_DEFAULT_SIGNALS</a><ul>
<li><a class="reference internal" href="#id14">Valid Values</a></li>
<li><a class="reference internal" href="#id15">Purpose</a></li>
<li><a class="reference internal" href="#id16">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-ignore-signals">DR_HOOK_IGNORE_SIGNALS</a><ul>
<li><a class="reference internal" href="#id19">Valid Values</a></li>
<li><a class="reference internal" href="#id20">Purpose</a></li>
<li><a class="reference internal" href="#id21">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-silent">DR_HOOK_SILENT</a><ul>
<li><a class="reference internal" href="#id24">Valid Values</a></li>
<li><a class="reference internal" href="#id25">Purpose</a></li>
<li><a class="reference internal" href="#id26">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-init-signals">DR_HOOK_INIT_SIGNALS</a><ul>
<li><a class="reference internal" href="#id29">Valid Values</a></li>
<li><a class="reference internal" href="#id30">Purpose</a></li>
<li><a class="reference internal" href="#id31">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-show-process-options">DR_HOOK_SHOW_PROCESS_OPTIONS</a><ul>
<li><a class="reference internal" href="#id35">Valid Values</a></li>
<li><a class="reference internal" href="#id36">Purpose</a></li>
<li><a class="reference internal" href="#id37">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#atp-enabled">ATP_ENABLED</a><ul>
<li><a class="reference internal" href="#id40">Valid Values</a></li>
<li><a class="reference internal" href="#id41">Purpose</a></li>
<li><a class="reference internal" href="#id42">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#atp-max-cores">ATP_MAX_CORES</a><ul>
<li><a class="reference internal" href="#id45">Valid Values</a></li>
<li><a class="reference internal" href="#id46">Purpose</a></li>
<li><a class="reference internal" href="#id47">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#atp-max-analysis-time">ATP_MAX_ANALYSIS_TIME</a><ul>
<li><a class="reference internal" href="#id50">Valid Values</a></li>
<li><a class="reference internal" href="#id51">Purpose</a></li>
<li><a class="reference internal" href="#id52">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#atp-ignore-sigterm">ATP_IGNORE_SIGTERM</a><ul>
<li><a class="reference internal" href="#id55">Valid Values</a></li>
<li><a class="reference internal" href="#id56">Purpose</a></li>
<li><a class="reference internal" href="#id57">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-allow-coredump">DR_HOOK_ALLOW_COREDUMP</a><ul>
<li><a class="reference internal" href="#id60">Valid Values</a></li>
<li><a class="reference internal" href="#id61">Purpose</a></li>
<li><a class="reference internal" href="#id62">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-profile">DR_HOOK_PROFILE</a><ul>
<li><a class="reference internal" href="#id66">Valid Values</a></li>
<li><a class="reference internal" href="#id67">Purpose</a></li>
<li><a class="reference internal" href="#id68">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-profile-proc">DR_HOOK_PROFILE_PROC</a><ul>
<li><a class="reference internal" href="#id71">Valid Values</a></li>
<li><a class="reference internal" href="#id72">Purpose</a></li>
<li><a class="reference internal" href="#id73">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-profile-limit">DR_HOOK_PROFILE_LIMIT</a><ul>
<li><a class="reference internal" href="#id76">Valid Values</a></li>
<li><a class="reference internal" href="#id77">Purpose</a></li>
<li><a class="reference internal" href="#id78">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-funcenter">DR_HOOK_FUNCENTER</a><ul>
<li><a class="reference internal" href="#id80">Valid Values</a></li>
<li><a class="reference internal" href="#id81">Purpose</a></li>
<li><a class="reference internal" href="#id82">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-funcexit">DR_HOOK_FUNCEXIT</a><ul>
<li><a class="reference internal" href="#id85">Valid Values</a></li>
<li><a class="reference internal" href="#id86">Purpose</a></li>
<li><a class="reference internal" href="#id87">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-timeline">DR_HOOK_TIMELINE</a><ul>
<li><a class="reference internal" href="#id90">Valid Values</a></li>
<li><a class="reference internal" href="#id91">Purpose</a></li>
<li><a class="reference internal" href="#id92">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-timeline-thread">DR_HOOK_TIMELINE_THREAD</a><ul>
<li><a class="reference internal" href="#id95">Valid Values</a></li>
<li><a class="reference internal" href="#id96">Purpose</a></li>
<li><a class="reference internal" href="#id97">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-timeline-format">DR_HOOK_TIMELINE_FORMAT</a><ul>
<li><a class="reference internal" href="#id100">Valid Values</a></li>
<li><a class="reference internal" href="#id101">Purpose</a></li>
<li><a class="reference internal" href="#id102">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-timeline-unitno">DR_HOOK_TIMELINE_UNITNO</a><ul>
<li><a class="reference internal" href="#id105">Valid Values</a></li>
<li><a class="reference internal" href="#id106">Purpose</a></li>
<li><a class="reference internal" href="#id107">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-timeline-freq">DR_HOOK_TIMELINE_FREQ</a><ul>
<li><a class="reference internal" href="#id110">Valid Values</a></li>
<li><a class="reference internal" href="#id111">Purpose</a></li>
<li><a class="reference internal" href="#id112">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-timeline-mb">DR_HOOK_TIMELINE_MB</a><ul>
<li><a class="reference internal" href="#id115">Valid Values</a></li>
<li><a class="reference internal" href="#id116">Purpose</a></li>
<li><a class="reference internal" href="#id117">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-trace-stack">DR_HOOK_TRACE_STACK</a><ul>
<li><a class="reference internal" href="#id120">Valid Values</a></li>
<li><a class="reference internal" href="#id121">Purpose</a></li>
<li><a class="reference internal" href="#id122">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-random-memstat">DR_HOOK_RANDOM_MEMSTAT</a><ul>
<li><a class="reference internal" href="#id125">Valid Values</a></li>
<li><a class="reference internal" href="#id126">Purpose</a></li>
<li><a class="reference internal" href="#id127">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-hashbits">DR_HOOK_HASHBITS</a><ul>
<li><a class="reference internal" href="#id130">Valid Values</a></li>
<li><a class="reference internal" href="#id131">Purpose</a></li>
<li><a class="reference internal" href="#id133">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-ncallstack">DR_HOOK_NCALLSTACK</a><ul>
<li><a class="reference internal" href="#id136">Valid Values</a></li>
<li><a class="reference internal" href="#id137">Purpose</a></li>
<li><a class="reference internal" href="#id139">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-harakiri-timeout">DR_HOOK_HARAKIRI_TIMEOUT</a><ul>
<li><a class="reference internal" href="#id142">Valid Values</a></li>
<li><a class="reference internal" href="#id143">Purpose</a></li>
<li><a class="reference internal" href="#id144">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-use-lockfile">DR_HOOK_USE_LOCKFILE</a><ul>
<li><a class="reference internal" href="#id147">Valid Values</a></li>
<li><a class="reference internal" href="#id148">Purpose</a></li>
<li><a class="reference internal" href="#id149">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-trapfpe">DR_HOOK_TRAPFPE</a><ul>
<li><a class="reference internal" href="#id152">Valid Values</a></li>
<li><a class="reference internal" href="#id153">Purpose</a></li>
<li><a class="reference internal" href="#id154">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-trapfpe-invalid">DR_HOOK_TRAPFPE_INVALID</a><ul>
<li><a class="reference internal" href="#id157">Valid Values</a></li>
<li><a class="reference internal" href="#id158">Purpose</a></li>
<li><a class="reference internal" href="#id159">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-trapfpe-divbyzero">DR_HOOK_TRAPFPE_DIVBYZERO</a><ul>
<li><a class="reference internal" href="#id162">Valid Values</a></li>
<li><a class="reference internal" href="#id163">Purpose</a></li>
<li><a class="reference internal" href="#id164">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-trapfpe-overflow">DR_HOOK_TRAPFPE_OVERFLOW</a><ul>
<li><a class="reference internal" href="#id167">Valid Values</a></li>
<li><a class="reference internal" href="#id168">Purpose</a></li>
<li><a class="reference internal" href="#id169">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-timed-kill">DR_HOOK_TIMED_KILL</a><ul>
<li><a class="reference internal" href="#id172">Valid Values</a></li>
<li><a class="reference internal" href="#id173">Purpose</a></li>
<li><a class="reference internal" href="#id174">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-dump-smaps">DR_HOOK_DUMP_SMAPS</a><ul>
<li><a class="reference internal" href="#id177">Valid Values</a></li>
<li><a class="reference internal" href="#id178">Purpose</a></li>
<li><a class="reference internal" href="#id179">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-dump-maps">DR_HOOK_DUMP_MAPS</a><ul>
<li><a class="reference internal" href="#id182">Valid Values</a></li>
<li><a class="reference internal" href="#id183">Purpose</a></li>
<li><a class="reference internal" href="#id184">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-dump-buddyinfo">DR_HOOK_DUMP_BUDDYINFO</a><ul>
<li><a class="reference internal" href="#id187">Valid Values</a></li>
<li><a class="reference internal" href="#id188">Purpose</a></li>
<li><a class="reference internal" href="#id189">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-dump-meminfo">DR_HOOK_DUMP_MEMINFO</a><ul>
<li><a class="reference internal" href="#id192">Valid Values</a></li>
<li><a class="reference internal" href="#id193">Purpose</a></li>
<li><a class="reference internal" href="#id194">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-dump-hugepages">DR_HOOK_DUMP_HUGEPAGES</a><ul>
<li><a class="reference internal" href="#id197">Valid Values</a></li>
<li><a class="reference internal" href="#id198">Purpose</a></li>
<li><a class="reference internal" href="#id199">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-gencore">DR_HOOK_GENCORE</a><ul>
<li><a class="reference internal" href="#id202">Valid Values</a></li>
<li><a class="reference internal" href="#id203">Purpose</a></li>
<li><a class="reference internal" href="#id204">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-gencore-signal">DR_HOOK_GENCORE_SIGNAL</a><ul>
<li><a class="reference internal" href="#id207">Valid Values</a></li>
<li><a class="reference internal" href="#id208">Purpose</a></li>
<li><a class="reference internal" href="#id209">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-strict-regions">DR_HOOK_STRICT_REGIONS</a><ul>
<li><a class="reference internal" href="#id212">Valid Values</a></li>
<li><a class="reference internal" href="#id213">Purpose</a></li>
<li><a class="reference internal" href="#id214">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-nvtx">DR_HOOK_NVTX</a><ul>
<li><a class="reference internal" href="#id216">Valid Values</a></li>
<li><a class="reference internal" href="#id217">Purpose</a></li>
<li><a class="reference internal" href="#id218">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-nvtx-spam-call-count">DR_HOOK_NVTX_SPAM_CALL_COUNT</a><ul>
<li><a class="reference internal" href="#id220">Valid Values</a></li>
<li><a class="reference internal" href="#id221">Purpose</a></li>
<li><a class="reference internal" href="#id222">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-nvtx-spam-wt">DR_HOOK_NVTX_SPAM_WT</a><ul>
<li><a class="reference internal" href="#id224">Valid Values</a></li>
<li><a class="reference internal" href="#id225">Purpose</a></li>
<li><a class="reference internal" href="#id226">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-opt">DR_HOOK_OPT</a><ul>
<li><a class="reference internal" href="#id228">Valid Values</a></li>
<li><a class="reference internal" href="#id229">Purpose</a></li>
<li><a class="reference internal" href="#id230">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-callpath-indent">DR_HOOK_CALLPATH_INDENT</a><ul>
<li><a class="reference internal" href="#id235">Valid Values</a></li>
<li><a class="reference internal" href="#id236">Purpose</a></li>
<li><a class="reference internal" href="#id237">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-callpath-depth">DR_HOOK_CALLPATH_DEPTH</a><ul>
<li><a class="reference internal" href="#id240">Valid Values</a></li>
<li><a class="reference internal" href="#id241">Purpose</a></li>
<li><a class="reference internal" href="#id242">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-callpath-packed">DR_HOOK_CALLPATH_PACKED</a><ul>
<li><a class="reference internal" href="#id247">Valid Values</a></li>
<li><a class="reference internal" href="#id248">Purpose</a></li>
<li><a class="reference internal" href="#id249">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-calltrace">DR_HOOK_CALLTRACE</a><ul>
<li><a class="reference internal" href="#id253">Valid Values</a></li>
<li><a class="reference internal" href="#id254">Purpose</a></li>
<li><a class="reference internal" href="#id255">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dr-hook-watch-print-max">DR_HOOK_WATCH_PRINT_MAX</a><ul>
<li><a class="reference internal" href="#id259">Valid Values</a></li>
<li><a class="reference internal" href="#id260">Purpose</a></li>
<li><a class="reference internal" href="#id261">Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DrHook Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Flags &amp; Environment variables</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/flag.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="flags-environment-variables">
<h1>Flags &amp; Environment variables<a class="headerlink" href="#flags-environment-variables" title="Link to this heading"></a></h1>
<section id="dr-hook-show-lock">
<span id="id1"></span><h2>DR_HOOK_SHOW_LOCK<a class="headerlink" href="#dr-hook-show-lock" title="Link to this heading"></a></h2>
<section id="valid-values">
<h3>Valid Values<a class="headerlink" href="#valid-values" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="purpose">
<h3>Purpose<a class="headerlink" href="#purpose" title="Link to this heading"></a></h3>
<p>Used to specify if lock debug info should be output. This is on initialisation only.</p>
</section>
<section id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h3>
<p>This is done by enabling <code class="docutils literal notranslate"><span class="pre">OML_DEBUG</span></code> in the <em>OML</em> library, initialising a new lockid, and then restoring the original value.</p>
<div class="line-block">
<div class="line">This debug info takes the following format:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">oml_init_lockid_with_name</span> <span class="pre">&quot;lock_name&quot;</span> <span class="pre">:</span> <span class="pre">lock_ID,</span> <span class="pre">lock_address</span></code></div>
</div>
</section>
</section>
<section id="omp-stacksize">
<span id="id3"></span><h2>OMP_STACKSIZE<a class="headerlink" href="#omp-stacksize" title="Link to this heading"></a></h2>
<section id="id4">
<h3>Valid Values<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; &lt;suffix&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
<div class="line">suffix ::= ‘’ | ‘G’ | ‘M’ | ‘K’</div>
</div>
</section>
<section id="id5">
<h3>Purpose<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p>Specifies an indicative stack size the master thread should not exceed.</p>
</section>
<section id="id6">
<h3>Notes<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p>This is an overloaded environment variable, used primarily by <em>OpenMP</em>.</p>
<p>It will only be read if <a class="reference internal" href="#dr-hook-trace-stack"><span class="std std-ref">DR_HOOK_TRACE_STACK</span></a> is also set.</p>
<p><code class="docutils literal notranslate"><span class="pre">OMP_STACKSIZE</span></code> is scaled by <code class="docutils literal notranslate"><span class="pre">opt_trace_stack</span></code>, obtained from <a class="reference internal" href="#dr-hook-trace-stack"><span class="std std-ref">DR_HOOK_TRACE_STACK</span></a>, to give <code class="docutils literal notranslate"><span class="pre">drhook_stacksize_threshold</span></code>. If <code class="docutils literal notranslate"><span class="pre">drhook_stacksize_threshold</span></code> is exceeded by the master thread during a <code class="docutils literal notranslate"><span class="pre">random_memstat</span></code> check, an abort will occur.</p>
<p>The stack size can be specified in GiB, MiB, or KiB using the suffix <code class="docutils literal notranslate"><span class="pre">G</span></code>, <code class="docutils literal notranslate"><span class="pre">M</span></code>, or <code class="docutils literal notranslate"><span class="pre">K</span></code> respectively. A lack of suffix will imply the stack size is in bytes. If multiple suffixes are specified, then the largest specified will be chosen. The stack size is truncated at the first occurring suffix.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code>.</p>
<p>An invalid or negative input size will result in a default of <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-catch-signals">
<span id="id8"></span><h2>DR_HOOK_CATCH_SIGNALS<a class="headerlink" href="#dr-hook-catch-signals" title="Link to this heading"></a></h2>
<section id="id9">
<h3>Valid Values<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;signal&gt; |  &lt;valid_value&gt; &lt;delim&gt; &lt;signal&gt;</div>
<div class="line">delim ::= ‘,’ | ‘ ‘ | ‘t’ | ‘/’</div>
<div class="line">signal ::= ‘-1’ | &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt; | &lt;number&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id10">
<h3>Purpose<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<p>Specifies a list of signals to be caught and handled by drhook.</p>
</section>
<section id="id11">
<h3>Notes<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<p>If $1 leq $``signal``$ leq$ <code class="docutils literal notranslate"><span class="pre">NSIG</span></code>, then it is registered to be caught and handled by drhook - unless it has been set to ignored by
<a class="reference internal" href="#dr-hook-ignore-signals"><span class="std std-ref">DR_HOOK_IGNORE_SIGNALS</span></a>. <code class="docutils literal notranslate"><span class="pre">NSIG</span></code> is defined in <code class="file docutils literal notranslate"><span class="pre">signal.h</span></code> and is system dependant.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">signal</span></code> $= -1$, then all available catchable signals are registered to be caught and handled by drhook. Any value after $-1$ will be discarded.</p>
<p>All other values will be silently discarded.</p>
</section>
</section>
<section id="dr-hook-restore-default-signals">
<span id="id13"></span><h2>DR_HOOK_RESTORE_DEFAULT_SIGNALS<a class="headerlink" href="#dr-hook-restore-default-signals" title="Link to this heading"></a></h2>
<section id="id14">
<h3>Valid Values<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;signal&gt; |  &lt;valid_value&gt; &lt;delim&gt; &lt;signal&gt;</div>
<div class="line">delim ::= ‘,’ | ‘ ‘ | ‘t’ | ‘/’</div>
<div class="line">signal ::= ‘-1’ | &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt; | &lt;number&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id15">
<h3>Purpose<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<p>Specifies a list of signals to have their default handler restored, if they haven’t been set to be ignored.</p>
</section>
<section id="id16">
<h3>Notes<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<p>If $1 leq $``signal``$ leq$ <code class="docutils literal notranslate"><span class="pre">NSIG</span></code>, then it’s default signal handler is restored - unless it has been set to ignored by
<a class="reference internal" href="#dr-hook-ignore-signals"><span class="std std-ref">DR_HOOK_IGNORE_SIGNALS</span></a>. <code class="docutils literal notranslate"><span class="pre">NSIG</span></code> is defined in <code class="file docutils literal notranslate"><span class="pre">signal.h</span></code> and is system dependant.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">signal</span></code> $= -1$, then all available catchable signals have their default signal handler restored. Any value after $-1$ will be discarded.</p>
<p>All other values will be silently discarded.</p>
</section>
</section>
<section id="dr-hook-ignore-signals">
<span id="id18"></span><h2>DR_HOOK_IGNORE_SIGNALS<a class="headerlink" href="#dr-hook-ignore-signals" title="Link to this heading"></a></h2>
<section id="id19">
<h3>Valid Values<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;signal&gt; |  &lt;valid_value&gt; &lt;delim&gt; &lt;signal&gt;</div>
<div class="line">delim ::= ‘,’ | ‘ ‘ | ‘t’ | ‘/’</div>
<div class="line">signal ::= ‘-1’ | &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt; | &lt;number&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id20">
<h3>Purpose<a class="headerlink" href="#id20" title="Link to this heading"></a></h3>
<p>Specifies a list of signals to be ignored by drhook. This means drhook will not handle these signals when they occur.</p>
</section>
<section id="id21">
<h3>Notes<a class="headerlink" href="#id21" title="Link to this heading"></a></h3>
<p>If <span class="math notranslate nohighlight">\(1 \leq\)</span> <code class="docutils literal notranslate"><span class="pre">signal</span></code> <span class="math notranslate nohighlight">\(\leq\)</span> <code class="docutils literal notranslate"><span class="pre">NSIG</span></code>, then it’s set to inactive and ignored by drhook. <code class="docutils literal notranslate"><span class="pre">NSIG</span></code> is defined in <code class="file docutils literal notranslate"><span class="pre">signal.h</span></code> and is system dependant.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">signal</span></code> is set to <code class="docutils literal notranslate"><span class="pre">-1</span></code>, then all available catchable signals are set to inactive and be ignored by drhook. Any value after <code class="docutils literal notranslate"><span class="pre">-1</span></code> will be discarded.</p>
<p>All other values will be silently discarded.</p>
</section>
</section>
<section id="dr-hook-silent">
<span id="id23"></span><h2>DR_HOOK_SILENT<a class="headerlink" href="#dr-hook-silent" title="Link to this heading"></a></h2>
<section id="id24">
<h3>Valid Values<a class="headerlink" href="#id24" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id25">
<h3>Purpose<a class="headerlink" href="#id25" title="Link to this heading"></a></h3>
<p>Used to enable or disable debug prints to <code class="docutils literal notranslate"><span class="pre">STDERR</span></code>.</p>
</section>
<section id="id26">
<h3>Notes<a class="headerlink" href="#id26" title="Link to this heading"></a></h3>
<p>This is not recommended during production run due to the excessive slowdown caused by printing.</p>
</section>
</section>
<section id="dr-hook-init-signals">
<span id="id28"></span><h2>DR_HOOK_INIT_SIGNALS<a class="headerlink" href="#dr-hook-init-signals" title="Link to this heading"></a></h2>
<section id="id29">
<h3>Valid Values<a class="headerlink" href="#id29" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id30">
<h3>Purpose<a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<p>Specifies if signals should be initialised via drhook (dangerous, but sometimes necessary).</p>
</section>
<section id="id31">
<h3>Notes<a class="headerlink" href="#id31" title="Link to this heading"></a></h3>
</section>
</section>
<section id="dr-hook-show-process-options">
<span id="id34"></span><h2>DR_HOOK_SHOW_PROCESS_OPTIONS<a class="headerlink" href="#dr-hook-show-process-options" title="Link to this heading"></a></h2>
<section id="id35">
<h3>Valid Values<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | ‘-1’</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt; | &lt;number&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id36">
<h3>Purpose<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<p>Specifies processIDs for which all options will be output todo{Where?}.</p>
</section>
<section id="id37">
<h3>Notes<a class="headerlink" href="#id37" title="Link to this heading"></a></h3>
<p>If this option isn’t specified, and <a class="reference internal" href="#dr-hook-silent"><span class="std std-ref">DR_HOOK_SILENT</span></a> doesn’t evaluate to <code class="docutils literal notranslate"><span class="pre">True</span></code>, then this will default to the process with ID <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>Specifying <code class="docutils literal notranslate"><span class="pre">-1</span></code> will enable this for all processes.</p>
</section>
</section>
<section id="atp-enabled">
<span id="id39"></span><h2>ATP_ENABLED<a class="headerlink" href="#atp-enabled" title="Link to this heading"></a></h2>
<section id="id40">
<h3>Valid Values<a class="headerlink" href="#id40" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id41">
<h3>Purpose<a class="headerlink" href="#id41" title="Link to this heading"></a></h3>
<p>Enable href{<a class="reference external" href="https://cpe.ext.hpe.com/docs/debugging-tools/atp.1.html">https://cpe.ext.hpe.com/docs/debugging-tools/atp.1.html</a>}{Abnormal Termination Processing (<em>ATP</em>)} mode for <em>Cray</em> systems. This will pass certain signals to <em>ATP</em> instead of drhook.</p>
</section>
<section id="id42">
<h3>Notes<a class="headerlink" href="#id42" title="Link to this heading"></a></h3>
<p>If nothing is specified, then this will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>This will also enable the following flags within drhook:
begin{itemize}</p>
<blockquote>
<div><p>item textit{ATP_MAX_CORES}
item textit{ATP_MAX_ANALYSIS_TIME}
item textit{ATP_IGNORE_SIGTERM}</p>
</div></blockquote>
<p>end{itemize}</p>
<p>The signals passed to ATP are:
begin{itemize}</p>
<blockquote>
<div><p>item <code class="docutils literal notranslate"><span class="pre">SIGINT</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGFPE</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGILL</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGTRAP</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGABRT</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGBUS</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGSEGV</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGSYS</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGXCPU</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGXFSZ</span></code>
item <code class="docutils literal notranslate"><span class="pre">SIGTERM</span></code>
begin{itemize}</p>
<blockquote>
<div><p>item <code class="docutils literal notranslate"><span class="pre">SIGTERM</span></code> is only passed to ATP if <a class="reference internal" href="#atp-ignore-sigterm"><span class="std std-ref">ATP_IGNORE_SIGTERM</span></a> is set</p>
</div></blockquote>
<p>end{itemize}</p>
</div></blockquote>
<p>end{itemize}</p>
</section>
</section>
<section id="atp-max-cores">
<span id="id44"></span><h2>ATP_MAX_CORES<a class="headerlink" href="#atp-max-cores" title="Link to this heading"></a></h2>
<section id="id45">
<h3>Valid Values<a class="headerlink" href="#id45" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id46">
<h3>Purpose<a class="headerlink" href="#id46" title="Link to this heading"></a></h3>
<p>Used as a multiplier for calculating the spin wait time for all cores to dump if <em>ATP</em> is enabled and handling signals.</p>
<p>Also used along with <a class="reference internal" href="#atp-enabled"><span class="std std-ref">ATP_ENABLED</span></a> to determine if any cores are being dumped by <em>ATP</em>.</p>
</section>
<section id="id47">
<h3>Notes<a class="headerlink" href="#id47" title="Link to this heading"></a></h3>
<p>This is an overloaded environment variable, used primarily for <em>ATP</em>. If nothing is specified, then this will default to <code class="docutils literal notranslate"><span class="pre">20</span></code>.</p>
<p>This will only be enable if the <a class="reference internal" href="#atp-enabled"><span class="std std-ref">ATP_ENABLED</span></a> flag evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
</section>
</section>
<section id="atp-max-analysis-time">
<span id="id49"></span><h2>ATP_MAX_ANALYSIS_TIME<a class="headerlink" href="#atp-max-analysis-time" title="Link to this heading"></a></h2>
<section id="id50">
<h3>Valid Values<a class="headerlink" href="#id50" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id51">
<h3>Purpose<a class="headerlink" href="#id51" title="Link to this heading"></a></h3>
<p>Used as a base value for calculating the spin wait time for all cores to dump if <em>ATP</em> is enabled and handling signals.</p>
</section>
<section id="id52">
<h3>Notes<a class="headerlink" href="#id52" title="Link to this heading"></a></h3>
<p>This is an overloaded environment variable, used primarily for <em>ATP</em>. If nothing is specified, then this will default to <code class="docutils literal notranslate"><span class="pre">300</span></code>.</p>
<p>This will only be enable if the <a class="reference internal" href="#atp-enabled"><span class="std std-ref">ATP_ENABLED</span></a> flag evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>The minimum between <code class="docutils literal notranslate"><span class="pre">ATP_MAX_ANALYSIS_TIME</span></code> and <code class="docutils literal notranslate"><span class="pre">drhook_harakiri_timeout</span></code> (set by <a class="reference internal" href="#dr-hook-harakiri-timeout"><span class="std std-ref">DR_HOOK_HARAKIRI_TIMEOUT</span></a>) is chosen as the base for calculating the time to spin wait for <em>ATP</em> to finish handling a signal, through the following:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">secs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MIN</span><span class="p">(</span><span class="n">drhook_harakiri_timeout</span><span class="p">,</span><span class="w"> </span><span class="n">atp_max_analysis_time</span><span class="p">);</span>
<span class="n">secs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MIN</span><span class="p">(</span><span class="n">tdiff</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">atp_max_cores</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">secs</span><span class="p">);</span>
</pre></div>
</div>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
</section>
</section>
<section id="atp-ignore-sigterm">
<span id="id54"></span><h2>ATP_IGNORE_SIGTERM<a class="headerlink" href="#atp-ignore-sigterm" title="Link to this heading"></a></h2>
<section id="id55">
<h3>Valid Values<a class="headerlink" href="#id55" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id56">
<h3>Purpose<a class="headerlink" href="#id56" title="Link to this heading"></a></h3>
<p>Determines if <code class="docutils literal notranslate"><span class="pre">SIGTERM</span></code> should be handled by drhook or <em>ATP</em>.</p>
</section>
<section id="id57">
<h3>Notes<a class="headerlink" href="#id57" title="Link to this heading"></a></h3>
<p>This is an overloaded environment variable, used primarily for <em>ATP</em>. If nothing is specified, then this will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>This will only be enable if the <a class="reference internal" href="#atp-enabled"><span class="std std-ref">ATP_ENABLED</span></a> flag evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
</section>
<section id="dr-hook-allow-coredump">
<span id="id59"></span><h2>DR_HOOK_ALLOW_COREDUMP<a class="headerlink" href="#dr-hook-allow-coredump" title="Link to this heading"></a></h2>
<section id="id60">
<h3>Valid Values<a class="headerlink" href="#id60" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | ‘-1’</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id61">
<h3>Purpose<a class="headerlink" href="#id61" title="Link to this heading"></a></h3>
<p>Specifies both if core dumping should be enabled, and if so, which processes.</p>
</section>
<section id="id62">
<h3>Notes<a class="headerlink" href="#id62" title="Link to this heading"></a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_ALLOW_COREDUMP</span></code> evaluates to $1leq$``process``$leq$``# of processes`` then only the specified process has core dumping enabled.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_ALLOW_COREDUMP</span></code> evaluates to -1 then core dumping is enabled for all processes.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_ALLOW_COREDUMP</span></code> evaluates to 0 then core dumping is disabled.</p>
</section>
</section>
<section id="dr-hook-profile">
<span id="id65"></span><h2>DR_HOOK_PROFILE<a class="headerlink" href="#dr-hook-profile" title="Link to this heading"></a></h2>
<section id="id66">
<h3>Valid Values<a class="headerlink" href="#id66" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;char&gt; | &lt;valid_value&gt; &lt;char&gt;</div>
<div class="line">char ::= &lt;letter&gt; | &lt;digit&gt; | &lt;symbol&gt;</div>
<div class="line">letter ::= &lt;lower&gt; | &lt;upper&gt;</div>
<div class="line">upper ::= ‘A’ | ‘B’ | ‘C’ | ‘D’ | ‘E’ | ‘F’ | ‘G’ | ‘H’ | ‘I’ | ‘J’ |
| ‘K’ | ‘L’ | ‘M’ | ‘N’ | ‘O’ | ‘P’ | ‘Q’ | ‘R’ | ‘S’ | ‘T’ | ‘U’ | ‘V’ |
| ‘W’ | ‘X’ | ‘Y’ | ‘Z’</div>
</div>
<ul class="simple">
<li><p>\</p></li>
</ul>
<div class="line-block">
<div class="line">lower ::= ‘a’ | ‘b’ | ‘c’ | ‘d’ | ‘e’ | ‘f’ | ‘g’ | ‘h’ | ‘i’ | ‘j’ |</div>
<div class="line">‘k’ | ‘l’ | ‘m’ | ‘n’ | ‘o’ | ‘p’ | ‘q’ | ‘r’ | ‘s’ | ‘t’ | ‘u’ | ‘v’ |</div>
<div class="line">‘w’ | ‘x’ | ‘y’ | ‘z’</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
<div class="line">symbol ::= ‘ ' | ‘!’ | ‘”’ | ‘#’ | ‘$’ | ‘%’ | ‘&amp;’ | ‘’’ | ‘(’ | ‘)’ |</div>
</div>
<p>verb!’*’ | ‘+’ | ‘,’ | ‘-’ | ‘.’ | ‘:’ | ‘;’ | ‘&lt;’ | ‘=’ | ‘&gt;’ | ‘?’ | ‘&#64;’ <a href="#id263"><span class="problematic" id="id264">|!
\verb!'[' | '' | ']' | '^' | '_' | '`' | '{' | '|</span></a>’ | ‘}’ | ‘~’!</p>
</section>
<section id="id67">
<h3>Purpose<a class="headerlink" href="#id67" title="Link to this heading"></a></h3>
<p>Specifies where to output profiles.</p>
</section>
<section id="id68">
<h3>Notes<a class="headerlink" href="#id68" title="Link to this heading"></a></h3>
<p>While <code class="docutils literal notranslate"><span class="pre">DR_HOOK_PROFILE</span></code> is just to be a valid file name, many of the valid symbols are not recommended for obvious reasons.</p>
<p>If a relative path is used, then it will be relative to the rundir of the binary drhook is linked to.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_PROFILE</span></code> doesn’t contain the character <code class="docutils literal notranslate"><span class="pre">\%</span></code>, then <code class="docutils literal notranslate"><span class="pre">.\%d</span></code> will be appended.</p>
<p>If <a class="reference internal" href="#dr-hook-profile-proc"><span class="std std-ref">DR_HOOK_PROFILE_PROC</span></a> is set and valid, but <code class="docutils literal notranslate"><span class="pre">DR_HOOK_PROFILE</span></code> is not set, then \``DR_HOOK_PROFILE`` defaults to <code class="docutils literal notranslate"><span class="pre">drhook.prof.%d</span></code>.</p>
<p>If drhook fails to set the process specific patch string either due to an error or process configuration, then it will default to <code class="docutils literal notranslate"><span class="pre">drhook.prof.0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">DR_HOOK_PROFILE</span></code> is also indirectly used in <code class="docutils literal notranslate"><span class="pre">get_memmon_out</span></code>. <code class="docutils literal notranslate"><span class="pre">-mem</span></code> is simply appended to the previously described path.</p>
<p>This option is only used in profiling and memory profiling modes.</p>
</section>
</section>
<section id="dr-hook-profile-proc">
<span id="id70"></span><h2>DR_HOOK_PROFILE_PROC<a class="headerlink" href="#dr-hook-profile-proc" title="Link to this heading"></a></h2>
<section id="id71">
<h3>Valid Values<a class="headerlink" href="#id71" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | ‘-1’</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id72">
<h3>Purpose<a class="headerlink" href="#id72" title="Link to this heading"></a></h3>
<p>Used to specify which process, or all processes, that should output profiling data.</p>
</section>
<section id="id73">
<h3>Notes<a class="headerlink" href="#id73" title="Link to this heading"></a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_PROFILE_PROC</span></code> is <code class="docutils literal notranslate"><span class="pre">-1</span></code>, then all processes will out profiling data. All other valid values will result in the one specified process outputting its data.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">-1</span></code>.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<p>This option is only used in profiling and memory profiling modes.</p>
</section>
</section>
<section id="dr-hook-profile-limit">
<span id="id75"></span><h2>DR_HOOK_PROFILE_LIMIT<a class="headerlink" href="#dr-hook-profile-limit" title="Link to this heading"></a></h2>
<section id="id76">
<h3>Valid Values<a class="headerlink" href="#id76" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | &lt;number&gt; ‘.’ &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id77">
<h3>Purpose<a class="headerlink" href="#id77" title="Link to this heading"></a></h3>
<p>Specifies at which percentage of the maximum value data points should be dropped from profiling outputs.</p>
</section>
<section id="id78">
<h3>Notes<a class="headerlink" href="#id78" title="Link to this heading"></a></h3>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">-10</span></code>.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<p>This option is only used in profiling and memory profiling modes.
.. Lowest percentage accepted into the printouts
.. todo:: Not tested</p>
</section>
</section>
<section id="dr-hook-funcenter">
<span id="id79"></span><h2>DR_HOOK_FUNCENTER<a class="headerlink" href="#dr-hook-funcenter" title="Link to this heading"></a></h2>
<section id="id80">
<h3>Valid Values<a class="headerlink" href="#id80" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id81">
<h3>Purpose<a class="headerlink" href="#id81" title="Link to this heading"></a></h3>
<p>Used to specify a thread to print memory and stack information to stdout upon entering a function.</p>
</section>
<section id="id82">
<h3>Notes<a class="headerlink" href="#id82" title="Link to this heading"></a></h3>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>This will also set <code class="docutils literal notranslate"><span class="pre">opt_gethwm</span></code> and <code class="docutils literal notranslate"><span class="pre">opt_getstk</span></code> to <code class="docutils literal notranslate"><span class="pre">1</span></code>, that are usually handled by <a class="reference internal" href="#dr-hook-opt"><span class="std std-ref">DR_HOOK_OPT</span></a>.</p>
<p>To see when a process exits a function, use <a class="reference internal" href="#dr-hook-funcexit"><span class="std std-ref">DR_HOOK_FUNCEXIT</span></a>.</p>
</section>
</section>
<section id="dr-hook-funcexit">
<span id="id84"></span><h2>DR_HOOK_FUNCEXIT<a class="headerlink" href="#dr-hook-funcexit" title="Link to this heading"></a></h2>
<section id="id85">
<h3>Valid Values<a class="headerlink" href="#id85" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id86">
<h3>Purpose<a class="headerlink" href="#id86" title="Link to this heading"></a></h3>
<p>Used to specify a thread to print memory and stack information to stdout upon exiting a function.</p>
</section>
<section id="id87">
<h3>Notes<a class="headerlink" href="#id87" title="Link to this heading"></a></h3>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>This will also set <code class="docutils literal notranslate"><span class="pre">opt_gethwm</span></code> and <code class="docutils literal notranslate"><span class="pre">opt_getstk</span></code> to <code class="docutils literal notranslate"><span class="pre">1</span></code>, that are usually handled by <a class="reference internal" href="#dr-hook-opt"><span class="std std-ref">DR_HOOK_OPT</span></a>.</p>
<p>To see when a process enters a function, use <a class="reference internal" href="#dr-hook-funcenter"><span class="std std-ref">DR_HOOK_FUNCENTER</span></a>.</p>
</section>
</section>
<section id="dr-hook-timeline">
<span id="id89"></span><h2>DR_HOOK_TIMELINE<a class="headerlink" href="#dr-hook-timeline" title="Link to this heading"></a></h2>
<section id="id90">
<h3>Valid Values<a class="headerlink" href="#id90" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | ‘-1’</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id91">
<h3>Purpose<a class="headerlink" href="#id91" title="Link to this heading"></a></h3>
<p>Used to enable timeline mode for either all processes or a specific process.</p>
</section>
<section id="id92">
<h3>Notes<a class="headerlink" href="#id92" title="Link to this heading"></a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMELINE</span></code> is <code class="docutils literal notranslate"><span class="pre">-1</span></code>, then all processes will have timeline mode enabled. All other non-zero valid values will result in the one specified process having timeline mode enabled.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMELINE</span></code> to a non-zero value also causes drhook to check the following options:
begin{itemize}</p>
<blockquote>
<div><p>item <a class="reference internal" href="#dr-hook-timeline-thread"><span class="std std-ref">DR_HOOK_TIMELINE_THREAD</span></a>
item <a class="reference internal" href="#dr-hook-timeline-format"><span class="std std-ref">DR_HOOK_TIMELINE_FORMAT</span></a>
item <a class="reference internal" href="#dr-hook-timeline-unitno"><span class="std std-ref">DR_HOOK_TIMELINE_UNITNO</span></a>
item <a class="reference internal" href="#dr-hook-timeline-freq"><span class="std std-ref">DR_HOOK_TIMELINE_FREQ</span></a>
item <a class="reference internal" href="#dr-hook-timeline-mb"><span class="std std-ref">DR_HOOK_TIMELINE_MB</span></a></p>
</div></blockquote>
<p>end{itemize}</p>
</section>
</section>
<section id="dr-hook-timeline-thread">
<span id="id94"></span><h2>DR_HOOK_TIMELINE_THREAD<a class="headerlink" href="#dr-hook-timeline-thread" title="Link to this heading"></a></h2>
<section id="id95">
<h3>Valid Values<a class="headerlink" href="#id95" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id96">
<h3>Purpose<a class="headerlink" href="#id96" title="Link to this heading"></a></h3>
<p>Used to specify which threads should output timeline info upon entry and exit of a region.</p>
</section>
<section id="id97">
<h3>Notes<a class="headerlink" href="#id97" title="Link to this heading"></a></h3>
<p>If timeline mode is enabled via <a class="reference internal" href="#dr-hook-timeline"><span class="std std-ref">DR_HOOK_TIMELINE</span></a>, then for all threads in the range $1 rightarrow n$ (inclusive) drhook will print timeline information on both entry and exit from a region. drhook will also print the sum of <em>all threads</em> for the first thread… todo:: Which info gets summed? is it all?</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMELINE_THREAD</span></code> is set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, then all n will be set so as to cover all threads and the behaviour is identical to the above.</p>
<p>While not strictly valid, any value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will have the same behaviour as <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
</section>
<section id="dr-hook-timeline-format">
<span id="id99"></span><h2>DR_HOOK_TIMELINE_FORMAT<a class="headerlink" href="#dr-hook-timeline-format" title="Link to this heading"></a></h2>
<section id="id100">
<h3>Valid Values<a class="headerlink" href="#id100" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id101">
<h3>Purpose<a class="headerlink" href="#id101" title="Link to this heading"></a></h3>
<p>Used to specify if timeline information should be output in value only or verbose mode.</p>
</section>
<section id="id102">
<h3>Notes<a class="headerlink" href="#id102" title="Link to this heading"></a></h3>
<p>This option is only available if timeline mode is enabled via <a class="reference internal" href="#dr-hook-timeline"><span class="std std-ref">DR_HOOK_TIMELINE</span></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMELINE_FORMAT</span></code> is <code class="docutils literal notranslate"><span class="pre">1</span></code>, then the following value only formatter will be used:</p>
<p><code class="docutils literal notranslate"><span class="pre">%.6f</span> <span class="pre">%.4g</span> <span class="pre">%.4g</span> <span class="pre">%.4g</span> <span class="pre">%.4g</span></code></p>
<p>Otherwise, the verbose r is used:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;wall=%.6f</span> <span class="pre">cpu=%.4g</span> <span class="pre">hwm=%.4g</span> <span class="pre">rss=%.4g</span> <span class="pre">curheap=%.4g</span> <span class="pre">stack=%.4g</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">vmpeak=%.4g</span> <span class="pre">pag=%lld&quot;</span></code></p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
</section>
<section id="dr-hook-timeline-unitno">
<span id="id104"></span><h2>DR_HOOK_TIMELINE_UNITNO<a class="headerlink" href="#dr-hook-timeline-unitno" title="Link to this heading"></a></h2>
<section id="id105">
<h3>Valid Values<a class="headerlink" href="#id105" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id106">
<h3>Purpose<a class="headerlink" href="#id106" title="Link to this heading"></a></h3>
<p>Specifies the unit number to be used for timeline output.</p>
</section>
<section id="id107">
<h3>Notes<a class="headerlink" href="#id107" title="Link to this heading"></a></h3>
<p>This option is only available if timeline mode is enabled via <a class="reference internal" href="#dr-hook-timeline"><span class="std std-ref">DR_HOOK_TIMELINE</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMELINE_UNITNO</span></code> must be an integer between 1 and 99. Some unit numbers are reserved: 5 is standard input, 6 is standard output.</p>
<p>As the value of <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMELINE_UNITNO</span></code> has to be interpreted by <code class="docutils literal notranslate"><span class="pre">atoi</span></code>, only integer unit numbers are valid.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">0</span></code> is specified, then timeline outputs are silently ignored.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">6</span></code>.</p>
</section>
</section>
<section id="dr-hook-timeline-freq">
<span id="id109"></span><h2>DR_HOOK_TIMELINE_FREQ<a class="headerlink" href="#dr-hook-timeline-freq" title="Link to this heading"></a></h2>
<section id="id110">
<h3>Valid Values<a class="headerlink" href="#id110" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt; | &lt;valid_value&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id111">
<h3>Purpose<a class="headerlink" href="#id111" title="Link to this heading"></a></h3>
<p>Used to specify how many nth region’s entries/exits should be output during timeline mode.</p>
</section>
<section id="id112">
<h3>Notes<a class="headerlink" href="#id112" title="Link to this heading"></a></h3>
<p>This option is only available if timeline mode is enabled via <a class="reference internal" href="#dr-hook-timeline"><span class="std std-ref">DR_HOOK_TIMELINE</span></a>.</p>
<p>If a region is entered/exited and it isn’t the nth call, but the resident set size does vary by more than <a class="reference internal" href="#dr-hook-timeline-mb"><span class="std std-ref">DR_HOOK_TIMELINE_MB</span></a>, then it is output anyway.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">1</span></code> will silently disable timeline mode.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1000000</span></code>.</p>
</section>
</section>
<section id="dr-hook-timeline-mb">
<span id="id114"></span><h2>DR_HOOK_TIMELINE_MB<a class="headerlink" href="#dr-hook-timeline-mb" title="Link to this heading"></a></h2>
<section id="id115">
<h3>Valid Values<a class="headerlink" href="#id115" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | &lt;number&gt; ‘.’ &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id116">
<h3>Purpose<a class="headerlink" href="#id116" title="Link to this heading"></a></h3>
<p>This specifies how much the resident set size needs to vary by, in MB, before <a class="reference internal" href="#dr-hook-timeline-freq"><span class="std std-ref">DR_HOOK_TIMELINE_FREQ</span></a> is overridden.</p>
</section>
<section id="id117">
<h3>Notes<a class="headerlink" href="#id117" title="Link to this heading"></a></h3>
<p>This option is only available if timeline mode is enabled via <a class="reference internal" href="#dr-hook-timeline"><span class="std std-ref">DR_HOOK_TIMELINE</span></a>.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.</p>
</section>
</section>
<section id="dr-hook-trace-stack">
<span id="id119"></span><h2>DR_HOOK_TRACE_STACK<a class="headerlink" href="#dr-hook-trace-stack" title="Link to this heading"></a></h2>
<section id="id120">
<h3>Valid Values<a class="headerlink" href="#id120" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | &lt;number&gt; ‘.’ &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;number&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id121">
<h3>Purpose<a class="headerlink" href="#id121" title="Link to this heading"></a></h3>
<p>A multiplier for <a class="reference internal" href="#omp-stacksize"><span class="std std-ref">OMP_STACKSIZE</span></a>, to monitor high master thread stack usage.</p>
</section>
<section id="id122">
<h3>Notes<a class="headerlink" href="#id122" title="Link to this heading"></a></h3>
<p>As described for <a class="reference internal" href="#omp-stacksize"><span class="std std-ref">OMP_STACKSIZE</span></a>, <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TRACE_STACK</span></code> is used to scale the value of \:ref:<cite>OMP_STACKSIZE &lt;OMP_STACKSIZE&gt;</cite> to give <code class="docutils literal notranslate"><span class="pre">drhook_stacksize_threshold</span></code>. If \``drhook_stacksize_threshold`` is exceeded by the master thread during a <code class="docutils literal notranslate"><span class="pre">random_memstat</span></code> check, an abort will occur.</p>
<p><code class="docutils literal notranslate"><span class="pre">DR_HOOK_TRACE_STACK</span></code> being defined and non-zero also implies <code class="docutils literal notranslate"><span class="pre">opt_random_memstat</span></code> has a value of <code class="docutils literal notranslate"><span class="pre">1</span></code> (meaning it will always trigger a <code class="docutils literal notranslate"><span class="pre">random_memstat</span></code> check on entry to a drhook region), regardless of the value of <a class="reference internal" href="#dr-hook-random-memstat"><span class="std std-ref">DR_HOOK_RANDOM_MEMSTAT</span></a>. However, if <a class="reference internal" href="#dr-hook-random-memstat"><span class="std std-ref">DR_HOOK_RANDOM_MEMSTAT</span></a> is defined, it will override this value.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>. Additionally, <code class="docutils literal notranslate"><span class="pre">drhook_stacksize_threshold</span></code> won’t be scaled, and <code class="docutils literal notranslate"><span class="pre">opt_random_memstat</span></code> is not set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-random-memstat">
<span id="id124"></span><h2>DR_HOOK_RANDOM_MEMSTAT<a class="headerlink" href="#dr-hook-random-memstat" title="Link to this heading"></a></h2>
<section id="id125">
<h3>Valid Values<a class="headerlink" href="#id125" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id126">
<h3>Purpose<a class="headerlink" href="#id126" title="Link to this heading"></a></h3>
<p>Used to enable random memstat checks, and how often to do it.</p>
</section>
<section id="id127">
<h3>Notes<a class="headerlink" href="#id127" title="Link to this heading"></a></h3>
<p>A value greater than <code class="docutils literal notranslate"><span class="pre">RAND_MAX</span></code> will be set to <code class="docutils literal notranslate"><span class="pre">RAND_MAX</span></code>.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, effectively disabling the feature.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-hashbits">
<span id="id129"></span><h2>DR_HOOK_HASHBITS<a class="headerlink" href="#dr-hook-hashbits" title="Link to this heading"></a></h2>
<section id="id130">
<h3>Valid Values<a class="headerlink" href="#id130" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id131">
<h3>Purpose<a class="headerlink" href="#id131" title="Link to this heading"></a></h3>
</section>
<section id="id133">
<h3>Notes<a class="headerlink" href="#id133" title="Link to this heading"></a></h3>
<p>A value greater than <code class="docutils literal notranslate"><span class="pre">RAND_MAX</span></code> will be set to <code class="docutils literal notranslate"><span class="pre">RAND_MAX</span></code>.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>The value of <code class="docutils literal notranslate"><span class="pre">DR_HOOK_HASHBITS</span></code>, <code class="docutils literal notranslate"><span class="pre">nhash</span></code>, is also used to update the values of <code class="docutils literal notranslate"><span class="pre">hashsize</span></code> and <code class="docutils literal notranslate"><span class="pre">hashmask</span></code>. This is done for <code class="docutils literal notranslate"><span class="pre">hashsize</span></code> via the following:\
<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">hashsize</span> <span class="pre">=</span> <span class="pre">((unsigned</span> <span class="pre">int)1&lt;&lt;(nhash));</span></code>\
For <code class="docutils literal notranslate"><span class="pre">hashmask</span></code> it is:\
<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">hashmask</span> <span class="pre">=</span> <span class="pre">(((unsigned</span> <span class="pre">int)1&lt;&lt;(nhash))-1);</span></code></p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>If this option isn’t specified, then it will default to the definition of <code class="docutils literal notranslate"><span class="pre">NHASH</span></code>, typically <code class="docutils literal notranslate"><span class="pre">16</span></code>. As such, <code class="docutils literal notranslate"><span class="pre">hashsize</span></code> and <code class="docutils literal notranslate"><span class="pre">hashmask</span></code> default to <code class="docutils literal notranslate"><span class="pre">65536</span></code> and <code class="docutils literal notranslate"><span class="pre">65535</span></code>, respectively.</p>
</section>
</section>
<section id="dr-hook-ncallstack">
<span id="id135"></span><h2>DR_HOOK_NCALLSTACK<a class="headerlink" href="#dr-hook-ncallstack" title="Link to this heading"></a></h2>
<section id="id136">
<h3>Valid Values<a class="headerlink" href="#id136" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id137">
<h3>Purpose<a class="headerlink" href="#id137" title="Link to this heading"></a></h3>
</section>
<section id="id139">
<h3>Notes<a class="headerlink" href="#id139" title="Link to this heading"></a></h3>
<p>This is an overloaded value with 2todo{?} functions. The first is to set the precision used by drhook, which also determines which method is used to X. A performance penalty is incurred when using the single precision mode (valid non-zero values), and so is not recommended.</p>
<p>The second function of <code class="docutils literal notranslate"><span class="pre">DR_HOOK_NCALLSTACK</span></code>, is to act as a parameter when in single precision mode. This parameter sets the maximum stack depth allowed. You must be careful when selecting this that a sufficient depth is chosen. If the depth is exceeded, then drhook will abort.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, effectively selecting double precision.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>, which enables double precision mode.</p>
</section>
</section>
<section id="dr-hook-harakiri-timeout">
<span id="id141"></span><h2>DR_HOOK_HARAKIRI_TIMEOUT<a class="headerlink" href="#dr-hook-harakiri-timeout" title="Link to this heading"></a></h2>
<section id="id142">
<h3>Valid Values<a class="headerlink" href="#id142" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id143">
<h3>Purpose<a class="headerlink" href="#id143" title="Link to this heading"></a></h3>
<p>A timeout for when to kill threads that may have hung.</p>
</section>
<section id="id144">
<h3>Notes<a class="headerlink" href="#id144" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DR_HOOK_HARAKIRI_TIMEOUT</span></code> is used in three places. The first is when a signal is first caught by drhook; it is used as the timeout for <code class="docutils literal notranslate"><span class="pre">alarm()</span></code>. This is to prevent hangs by triggering a second signal when the <code class="docutils literal notranslate"><span class="pre">alarm()</span></code> expires. This second signal then takes an alternative path for subsequent signals where the second use case of <code class="docutils literal notranslate"><span class="pre">DR_HOOK_HARAKIRI_TIMEOUT</span></code> occurs. Here it is used to spin for $``DR_HOOK_HARAKIRI_TIMEOUT`` + 60$ seconds before the thread is killed using <code class="docutils literal notranslate"><span class="pre">SIGKILL</span></code>. This is to allow for tracebacks to complete.</p>
<p>The third place it is used, is in conjunction with <a class="reference internal" href="#atp-max-analysis-time"><span class="std std-ref">ATP_MAX_ANALYSIS_TIME</span></a>. Here it is used in the following way to allow <em>ATP</em> to dump cores:</p>
<p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">secs</span> <span class="pre">=</span> <span class="pre">MIN(drhook_harakiri_timeout,atp_max_analysis_time);</span></code>\
<code class="docutils literal notranslate"><span class="pre">secs</span> <span class="pre">=</span> <span class="pre">60</span> <span class="pre">+</span> <span class="pre">MIN(tdiff</span> <span class="pre">*</span> <span class="pre">(atp_max_cores-1),secs);</span></code></p>
<p>The timeout is specified in seconds.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to the definition of <code class="docutils literal notranslate"><span class="pre">drhook_harakiri_timeout_default</span></code>, typically <code class="docutils literal notranslate"><span class="pre">500</span></code>.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>If this option isn’t specified, then it will default to the definition of <code class="docutils literal notranslate"><span class="pre">drhook_harakiri_timeout_default</span></code>.</p>
</section>
</section>
<section id="dr-hook-use-lockfile">
<span id="id146"></span><h2>DR_HOOK_USE_LOCKFILE<a class="headerlink" href="#dr-hook-use-lockfile" title="Link to this heading"></a></h2>
<section id="id147">
<h3>Valid Values<a class="headerlink" href="#id147" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id148">
<h3>Purpose<a class="headerlink" href="#id148" title="Link to this heading"></a></h3>
<p>Toggles the use of a lockfile, <code class="docutils literal notranslate"><span class="pre">drhook_lock</span></code>, for outputting which thread handled a signal first.</p>
</section>
<section id="id149">
<h3>Notes<a class="headerlink" href="#id149" title="Link to this heading"></a></h3>
<p>When enabled, this will enable a lockfile when handling signals in drhook. This lockfile, <code class="docutils literal notranslate"><span class="pre">drhook_lock</span></code>.. todo:: Where?}, will contain the number of the thread which got the lock first.todo{Does this imply that this thread triggered the signal?</p>
<p><code class="docutils literal notranslate"><span class="pre">DR_HOOK_USE_LOCKFILE</span></code> having a value evaluating to <code class="docutils literal notranslate"><span class="pre">1</span></code>, will also disable some output regarding the use of <a class="reference internal" href="#dr-hook-use-lockfile"><span class="std std-ref">DR_HOOK_USE_LOCKFILE</span></a> in it’s alternative path for subsequent signals.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
</section>
<section id="dr-hook-trapfpe">
<span id="id151"></span><h2>DR_HOOK_TRAPFPE<a class="headerlink" href="#dr-hook-trapfpe" title="Link to this heading"></a></h2>
<section id="id152">
<h3>Valid Values<a class="headerlink" href="#id152" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id153">
<h3>Purpose<a class="headerlink" href="#id153" title="Link to this heading"></a></h3>
<p>Toggles if floating point exceptions should be trapped, regardless of compiler settings.</p>
</section>
<section id="id154">
<h3>Notes<a class="headerlink" href="#id154" title="Link to this heading"></a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TRAPFPE</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">1</span></code>, then drhook will trap floating point exceptions regardless of compilation settings. A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> will instead rely on the compiler flags used, e.g. <code class="docutils literal notranslate"><span class="pre">-Ktrap=fp</span></code>… todo:: Talk about preprocessor guards</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
</section>
<section id="dr-hook-trapfpe-invalid">
<span id="id156"></span><h2>DR_HOOK_TRAPFPE_INVALID<a class="headerlink" href="#dr-hook-trapfpe-invalid" title="Link to this heading"></a></h2>
<section id="id157">
<h3>Valid Values<a class="headerlink" href="#id157" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id158">
<h3>Purpose<a class="headerlink" href="#id158" title="Link to this heading"></a></h3>
<p>Toggles whether invalid operation floating point exceptions should be trapped.</p>
</section>
<section id="id159">
<h3>Notes<a class="headerlink" href="#id159" title="Link to this heading"></a></h3>
<p>This will only be enabled if <a class="reference internal" href="#dr-hook-trapfpe"><span class="std std-ref">DR_HOOK_TRAPFPE</span></a> evaluates to <code class="docutils literal notranslate"><span class="pre">1</span></code> or the compiler had trapping of floating point exceptions enabled.</p>
<p>These invalid operations are defined by IEEE 754 standard.</p>
<p>If the exception is not trapped, then the result of the operation is <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
</section>
<section id="dr-hook-trapfpe-divbyzero">
<span id="id161"></span><h2>DR_HOOK_TRAPFPE_DIVBYZERO<a class="headerlink" href="#dr-hook-trapfpe-divbyzero" title="Link to this heading"></a></h2>
<section id="id162">
<h3>Valid Values<a class="headerlink" href="#id162" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id163">
<h3>Purpose<a class="headerlink" href="#id163" title="Link to this heading"></a></h3>
<p>Toggles whether divide by zero floating point exceptions should be trapped.</p>
</section>
<section id="id164">
<h3>Notes<a class="headerlink" href="#id164" title="Link to this heading"></a></h3>
<p>This will only be enabled if <a class="reference internal" href="#dr-hook-trapfpe"><span class="std std-ref">DR_HOOK_TRAPFPE</span></a> evaluates to <code class="docutils literal notranslate"><span class="pre">1</span></code> or the compiler had trapping of floating point exceptions enabled.</p>
<p>This exception occurs when a finite nonzero number is divided by zero.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
</section>
<section id="dr-hook-trapfpe-overflow">
<span id="id166"></span><h2>DR_HOOK_TRAPFPE_OVERFLOW<a class="headerlink" href="#dr-hook-trapfpe-overflow" title="Link to this heading"></a></h2>
<section id="id167">
<h3>Valid Values<a class="headerlink" href="#id167" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id168">
<h3>Purpose<a class="headerlink" href="#id168" title="Link to this heading"></a></h3>
<p>Toggles whether overflow floating point exceptions should be trapped.</p>
</section>
<section id="id169">
<h3>Notes<a class="headerlink" href="#id169" title="Link to this heading"></a></h3>
<p>This will only be enabled if <a class="reference internal" href="#dr-hook-trapfpe"><span class="std std-ref">DR_HOOK_TRAPFPE</span></a> evaluates to <code class="docutils literal notranslate"><span class="pre">1</span></code> or the compiler had trapping of floating point exceptions enabled.</p>
<p>This exception occurs when the result of a calculation cannot be represented as a finite value in the precision format of the destination. This behaviour is affected by rounding modes.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
</section>
<section id="dr-hook-timed-kill">
<span id="id171"></span><h2>DR_HOOK_TIMED_KILL<a class="headerlink" href="#dr-hook-timed-kill" title="Link to this heading"></a></h2>
<section id="id172">
<h3>Valid Values<a class="headerlink" href="#id172" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;formatted&gt; |  &lt;valid_value&gt; &lt;delim&gt; &lt;formatted&gt;</div>
<div class="line">delim ::= ‘,’ | ‘ ‘ | ‘t’ | ‘/’</div>
<div class="line">formatted ::= &lt;id&gt; ‘:’ &lt;id&gt; ‘:’ &lt;integer&gt; ‘:’ &lt;double&gt;</div>
<div class="line">double ::= &lt;double_part&gt; | ‘double_part’ ‘.’ &lt;double_part&gt;</div>
<div class="line">double_part ::= &lt;digit_0&gt; | &lt;double_part&gt; &lt;digit_0&gt;</div>
<div class="line">digit_0 ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
<div class="line">id = &lt;integer&gt; | ‘-1’</div>
<div class="line">integer ::= &lt;digit&gt; | &lt;integer&gt; &lt;digit&gt; | &lt;integer&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id173">
<h3>Purpose<a class="headerlink" href="#id173" title="Link to this heading"></a></h3>
<p>Set timers for specific, or all, threads to trigger signals. This is a developer option.</p>
</section>
<section id="id174">
<h3>Notes<a class="headerlink" href="#id174" title="Link to this heading"></a></h3>
<p>The parameters provided to <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMED_KILL</span></code> (<code class="docutils literal notranslate"><span class="pre">target_process</span></code>, <code class="docutils literal notranslate"><span class="pre">target_oml_thread_id</span></code>, <code class="docutils literal notranslate"><span class="pre">target_signal</span></code>, and <code class="docutils literal notranslate"><span class="pre">start_time</span></code>) are in the following pattern:</p>
<p><code class="docutils literal notranslate"><span class="pre">target_process:target_oml_thread_id:target_signal:start_time</span></code></p>
<p>Note that:
begin{itemize}</p>
<blockquote>
<div><p>item <code class="docutils literal notranslate"><span class="pre">target_process</span></code> can be a valid integer for a single process, or <code class="docutils literal notranslate"><span class="pre">-1</span></code> for all.
item <code class="docutils literal notranslate"><span class="pre">target_oml_thread_id</span></code> can be a valid integer for a single thread, or <code class="docutils literal notranslate"><span class="pre">-1</span></code> for all.
item <code class="docutils literal notranslate"><span class="pre">target_signal</span></code> must be valid for your system.
item <code class="docutils literal notranslate"><span class="pre">start_time</span></code> must be non-zero.</p>
</div></blockquote>
<p>end{itemize}
Any set of parameters that are invalid, will be silently discarded.</p>
<p>The timers will be started as part of drhook’s initialisation, and are specified in seconds.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
</section>
</section>
<section id="dr-hook-dump-smaps">
<span id="id176"></span><h2>DR_HOOK_DUMP_SMAPS<a class="headerlink" href="#dr-hook-dump-smaps" title="Link to this heading"></a></h2>
<section id="id177">
<h3>Valid Values<a class="headerlink" href="#id177" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id178">
<h3>Purpose<a class="headerlink" href="#id178" title="Link to this heading"></a></h3>
<p>Specifies whether <code class="file docutils literal notranslate"><span class="pre">/proc/&lt;process_ID&gt;/smaps</span></code> should be dumped when handling a signal or not. This is a developer option.</p>
</section>
<section id="id179">
<h3>Notes<a class="headerlink" href="#id179" title="Link to this heading"></a></h3>
<p><code class="file docutils literal notranslate"><span class="pre">smaps</span></code> will be dumped after the first signal is handled by drhook, but before signals are handled by other handlers, e.g. <em>ATP</em>. It will only be dumped for the process which raises the signal.</p>
<p><code class="file docutils literal notranslate"><span class="pre">smaps</span></code> will be dumped to <code class="file docutils literal notranslate"><span class="pre">/proc/&lt;process_ID&gt;/smaps</span></code>todo{in which directory?}.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-dump-maps">
<span id="id181"></span><h2>DR_HOOK_DUMP_MAPS<a class="headerlink" href="#dr-hook-dump-maps" title="Link to this heading"></a></h2>
<section id="id182">
<h3>Valid Values<a class="headerlink" href="#id182" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id183">
<h3>Purpose<a class="headerlink" href="#id183" title="Link to this heading"></a></h3>
<p>Specifies whether <code class="file docutils literal notranslate"><span class="pre">/proc/&lt;process_ID&gt;/maps</span></code> should be dumped when handling a signal or not. This is a developer option.</p>
</section>
<section id="id184">
<h3>Notes<a class="headerlink" href="#id184" title="Link to this heading"></a></h3>
<p><code class="file docutils literal notranslate"><span class="pre">maps</span></code> will be dumped after the first signal is handled by drhook, but before signals are handled by other handlers, e.g. <em>ATP</em>. It will only be dumped for the process which raises the signal.</p>
<p><code class="file docutils literal notranslate"><span class="pre">maps</span></code> will be dumped to <code class="file docutils literal notranslate"><span class="pre">/proc/&lt;process_ID&gt;/maps</span></code>todo{in which directory?}.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-dump-buddyinfo">
<span id="id186"></span><h2>DR_HOOK_DUMP_BUDDYINFO<a class="headerlink" href="#dr-hook-dump-buddyinfo" title="Link to this heading"></a></h2>
<section id="id187">
<h3>Valid Values<a class="headerlink" href="#id187" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id188">
<h3>Purpose<a class="headerlink" href="#id188" title="Link to this heading"></a></h3>
<p>Specifies whether <code class="file docutils literal notranslate"><span class="pre">/proc/buddyinfo</span></code> should be dumped when handling a signal or not. This is a developer option.</p>
</section>
<section id="id189">
<h3>Notes<a class="headerlink" href="#id189" title="Link to this heading"></a></h3>
<p><code class="file docutils literal notranslate"><span class="pre">buddyinfo</span></code> will be dumped after the first signal is handled by drhook, but before signals are handled by other handlers, e.g. <em>ATP</em>.</p>
<p><code class="file docutils literal notranslate"><span class="pre">buddyinfo</span></code> can also be dumped during the dumping of hugepages(enabled via <a class="reference internal" href="#dr-hook-dump-hugepages"><span class="std std-ref">DR_HOOK_DUMP_HUGEPAGES</span></a>). This occurs during the handling of signals, and when drhook enters a region.</p>
<p><code class="file docutils literal notranslate"><span class="pre">buddyinfo</span></code> will be dumped to <code class="file docutils literal notranslate"><span class="pre">/proc/buddyinfo</span></code>todo{in which directory?}.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-dump-meminfo">
<span id="id191"></span><h2>DR_HOOK_DUMP_MEMINFO<a class="headerlink" href="#dr-hook-dump-meminfo" title="Link to this heading"></a></h2>
<section id="id192">
<h3>Valid Values<a class="headerlink" href="#id192" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id193">
<h3>Purpose<a class="headerlink" href="#id193" title="Link to this heading"></a></h3>
<p>Specifies whether <code class="file docutils literal notranslate"><span class="pre">/proc/meminfo</span></code> should be dumped when handling a signal or not. This is a developer option.</p>
</section>
<section id="id194">
<h3>Notes<a class="headerlink" href="#id194" title="Link to this heading"></a></h3>
<p><code class="file docutils literal notranslate"><span class="pre">meminfo</span></code> will be dumped after the first signal is handled by drhook, but before signals are handled by other handlers, e.g. <em>ATP</em>.</p>
<p><code class="file docutils literal notranslate"><span class="pre">meminfo</span></code> can also be dumped during the dumping of hugepages (enabled via <a class="reference internal" href="#dr-hook-dump-hugepages"><span class="std std-ref">DR_HOOK_DUMP_HUGEPAGES</span></a>). This occurs during the handling of signals, and when drhook enters a region.</p>
<p><code class="file docutils literal notranslate"><span class="pre">meminfo</span></code> will be dumped to <code class="file docutils literal notranslate"><span class="pre">/proc/meminfo</span></code>todo{in which directory?}.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-dump-hugepages">
<span id="id196"></span><h2>DR_HOOK_DUMP_HUGEPAGES<a class="headerlink" href="#dr-hook-dump-hugepages" title="Link to this heading"></a></h2>
<section id="id197">
<h3>Valid Values<a class="headerlink" href="#id197" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;id&gt; ‘,’ &lt;double&gt;</div>
<div class="line">double ::= &lt;double_part&gt; | ‘double_part’ ‘.’ &lt;double_part&gt;</div>
<div class="line">double_part ::= &lt;digit_0&gt; | &lt;double_part&gt; &lt;digit_0&gt;</div>
<div class="line">digit_0 ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
<div class="line">id = &lt;integer&gt; | ‘-1’</div>
<div class="line">integer ::= &lt;digit&gt; | &lt;integer&gt; &lt;digit&gt; | &lt;integer&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id198">
<h3>Purpose<a class="headerlink" href="#id198" title="Link to this heading"></a></h3>
<blockquote>
<div><p>Specifies whether todo{ECMEMINFO} should be dumped or not. This is a developer option.</p>
</div></blockquote>
</section>
<section id="id199">
<h3>Notes<a class="headerlink" href="#id199" title="Link to this heading"></a></h3>
<p>The parameters provided to <code class="docutils literal notranslate"><span class="pre">DR_HOOK_DUMP_HUGEPAGES</span></code> (<code class="docutils literal notranslate"><span class="pre">target_process</span></code>,\ and <code class="docutils literal notranslate"><span class="pre">frequency</span></code>) are in the following pattern:</p>
<p><code class="docutils literal notranslate"><span class="pre">target_process,</span> <span class="pre">frequency</span></code></p>
<p>Note that:
begin{itemize}</p>
<blockquote>
<div><p>item <code class="docutils literal notranslate"><span class="pre">target_process</span></code> can be a valid integer for a single process, or <code class="docutils literal notranslate"><span class="pre">-1</span></code> for all.
item <code class="docutils literal notranslate"><span class="pre">frequency</span></code> is given in seconds. This is the minimum time that must pass before huge pages are dumped - unless the function has been called with the <code class="docutils literal notranslate"><span class="pre">enforced</span></code> flag. Although, enforcement isn’t currently used within drhook.</p>
</div></blockquote>
<p>end{itemize}
If either parameters are invalid, both will be silently discarded.
.. <code class="docutils literal notranslate"><span class="pre">meminfo</span></code> can also be dumped during the dumping of hugepages. This occurs during the handling of signals, and when drhook enters a region.</p>
<p>Hugepages are only dumped by the first thread.</p>
<p>Hugepage dumping can occur when handling a signal or entering a drhook region.</p>
<p><code class="file docutils literal notranslate"><span class="pre">/proc/buddyinfo</span></code> and <code class="file docutils literal notranslate"><span class="pre">/proc/meminfo</span></code> can also be dumped with hugepages, if <a class="reference internal" href="#dr-hook-dump-buddyinfo"><span class="std std-ref">DR_HOOK_DUMP_BUDDYINFO</span></a> and <a class="reference internal" href="#dr-hook-dump-meminfo"><span class="std std-ref">DR_HOOK_DUMP_MEMINFO</span></a> are enabled respectively.</p>
<p>The dumping of hugepages is handled by ec_meminfo. .. todo:: is this right? &amp; talk about if so</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0,0</span></code>.</p>
</section>
</section>
<section id="dr-hook-gencore">
<span id="id201"></span><h2>DR_HOOK_GENCORE<a class="headerlink" href="#dr-hook-gencore" title="Link to this heading"></a></h2>
<section id="id202">
<h3>Valid Values<a class="headerlink" href="#id202" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id203">
<h3>Purpose<a class="headerlink" href="#id203" title="Link to this heading"></a></h3>
<p>Specifies whether generating core dumps is enabled or not.</p>
</section>
<section id="id204">
<h3>Notes<a class="headerlink" href="#id204" title="Link to this heading"></a></h3>
<p>Any non-zero valid integer value will be treated as <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-gencore-signal">
<span id="id206"></span><h2>DR_HOOK_GENCORE_SIGNAL<a class="headerlink" href="#dr-hook-gencore-signal" title="Link to this heading"></a></h2>
<section id="id207">
<h3>Valid Values<a class="headerlink" href="#id207" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt; | &lt;valid_value&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id208">
<h3>Purpose<a class="headerlink" href="#id208" title="Link to this heading"></a></h3>
<p>Specifies the signal which triggers generating a core dump.</p>
</section>
<section id="id209">
<h3>Notes<a class="headerlink" href="#id209" title="Link to this heading"></a></h3>
<p>To be valid then it must be $1 leq <code class="docutils literal notranslate"><span class="pre">$signal``$</span> <span class="pre">\leq$</span> <span class="pre">``NSIG</span></code>, and not equal to <code class="docutils literal notranslate"><span class="pre">SIGABRT</span></code>. <code class="docutils literal notranslate"><span class="pre">NSIG</span></code> and <code class="docutils literal notranslate"><span class="pre">SIGABRT</span></code> are defined in <code class="file docutils literal notranslate"><span class="pre">signal.h</span></code> and are system dependant.</p>
<p>All invalid values will be silently discarded.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>, which causes it to be ignored.</p>
</section>
</section>
<section id="dr-hook-strict-regions">
<span id="id211"></span><h2>DR_HOOK_STRICT_REGIONS<a class="headerlink" href="#dr-hook-strict-regions" title="Link to this heading"></a></h2>
<section id="id212">
<h3>Valid Values<a class="headerlink" href="#id212" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id213">
<h3>Purpose<a class="headerlink" href="#id213" title="Link to this heading"></a></h3>
<p>Specifies if drhook region entry and exit calls must use the same label.</p>
</section>
<section id="id214">
<h3>Notes<a class="headerlink" href="#id214" title="Link to this heading"></a></h3>
<p>drhook region entry and exit calls can take a string, which is treated as a label for the region. However, while drhook doesn’t use the exit call label, extensions that hijack drhook calls may need the label as the unique identifier. This flag will cause drhook to crash instead of passing it to the extension.</p>
<p>Any non-zero valid integer value will be treated as <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified and <a class="reference internal" href="#dr-hook-nvtx"><span class="std std-ref">DR_HOOK_NVTX</span></a> is disabled, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>. If <a class="reference internal" href="#dr-hook-nvtx"><span class="std std-ref">DR_HOOK_NVTX</span></a> is enabled, then <a class="reference internal" href="#dr-hook-strict-regions"><span class="std std-ref">DR_HOOK_STRICT_REGIONS</span></a> will be enabled regardless of the value given.</p>
</section>
</section>
<section id="dr-hook-nvtx">
<span id="id215"></span><h2>DR_HOOK_NVTX<a class="headerlink" href="#dr-hook-nvtx" title="Link to this heading"></a></h2>
<section id="id216">
<h3>Valid Values<a class="headerlink" href="#id216" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id217">
<h3>Purpose<a class="headerlink" href="#id217" title="Link to this heading"></a></h3>
<p>Specifies if NVTX should be enabled at runtime or not.</p>
</section>
<section id="id218">
<h3>Notes<a class="headerlink" href="#id218" title="Link to this heading"></a></h3>
<p>Enables Nvidia’s href{<a class="reference external" href="https://github.com/NVIDIA/NVTX">https://github.com/NVIDIA/NVTX</a>}{NVTX} at runtime. This assumes that NVTX has been enabled and requested at compile time of drhook using todo{Link this}hyperref[section:options:ENABLEDR_HOOK_NVTX]{texttt{“ENABLEDR_HOOK_NVTX”}}.</p>
<p>If <a class="reference internal" href="#dr-hook-nvtx"><span class="std std-ref">DR_HOOK_NVTX</span></a> is enabled, then <a class="reference internal" href="#dr-hook-strict-regions"><span class="std std-ref">DR_HOOK_STRICT_REGIONS</span></a> will also be enabled. It will also enable <code class="docutils literal notranslate"><span class="pre">walltime</span></code> and <code class="docutils literal notranslate"><span class="pre">count</span></code> from <a class="reference internal" href="#dr-hook-opt"><span class="std std-ref">DR_HOOK_OPT</span></a>.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">DR_HOOK_TIMELINE</span></code> to a non-zero value also causes drhook to check the following options:
begin{itemize}</p>
<blockquote>
<div><p>item <a class="reference internal" href="#dr-hook-nvtx-spam-call-count"><span class="std std-ref">DR_HOOK_NVTX_SPAM_CALL_COUNT</span></a>
item <a class="reference internal" href="#dr-hook-nvtx-spam-wt"><span class="std std-ref">DR_HOOK_NVTX_SPAM_WT</span></a></p>
</div></blockquote>
<p>end{itemize}</p>
<p>Any non-zero valid integer value will be treated as <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-nvtx-spam-call-count">
<span id="id219"></span><h2>DR_HOOK_NVTX_SPAM_CALL_COUNT<a class="headerlink" href="#dr-hook-nvtx-spam-call-count" title="Link to this heading"></a></h2>
<section id="id220">
<h3>Valid Values<a class="headerlink" href="#id220" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt; | &lt;valid_value&gt; ‘0’</div>
<div class="line">digit ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id221">
<h3>Purpose<a class="headerlink" href="#id221" title="Link to this heading"></a></h3>
<p>Specifies the spam call count for NVTX.</p>
</section>
<section id="id222">
<h3>Notes<a class="headerlink" href="#id222" title="Link to this heading"></a></h3>
<p>The spam call count is the number of calls of a drhook region that needs to be reached, without a cumulative runtime longer than the <a class="reference internal" href="#dr-hook-nvtx-spam-wt"><span class="std std-ref">DR_HOOK_NVTX_SPAM_WT</span></a> time, for drhook to skip subsequent calls of that region for the functionality of NVTX. It will not skip core drhook profiling.</p>
<p>This option is only available if NVTX is enabled via <a class="reference internal" href="#dr-hook-nvtx"><span class="std std-ref">DR_HOOK_NVTX</span></a>.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to the definition of <code class="docutils literal notranslate"><span class="pre">nvtx_SCC_default</span></code>, typically <code class="docutils literal notranslate"><span class="pre">10</span></code>. While it is possible to specify <code class="docutils literal notranslate"><span class="pre">0</span></code>, this will effectively disable NVTX as all regions will be skipped - unless they can accumulate sufficient runtime to satisfy <a class="reference internal" href="#dr-hook-nvtx-spam-wt"><span class="std std-ref">DR_HOOK_NVTX_SPAM_WT</span></a> in their first call.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>If this option isn’t specified, then it will default to the definition of <code class="docutils literal notranslate"><span class="pre">nvtx_SCC_default</span></code>.</p>
</section>
</section>
<section id="dr-hook-nvtx-spam-wt">
<span id="id223"></span><h2>DR_HOOK_NVTX_SPAM_WT<a class="headerlink" href="#dr-hook-nvtx-spam-wt" title="Link to this heading"></a></h2>
<section id="id224">
<h3>Valid Values<a class="headerlink" href="#id224" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;number&gt; | ‘number’ ‘.’ &lt;number&gt;</div>
<div class="line">number ::= &lt;digit&gt; | &lt;double_part&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id225">
<h3>Purpose<a class="headerlink" href="#id225" title="Link to this heading"></a></h3>
<p>Specifies the spam wall time for NVTX.</p>
</section>
<section id="id226">
<h3>Notes<a class="headerlink" href="#id226" title="Link to this heading"></a></h3>
<p>The spam wall time is the cumulative runtime a drhook region must have if it is not to be skipped for NVTX functionality after exceeding <a class="reference internal" href="#dr-hook-nvtx-spam-call-count"><span class="std std-ref">DR_HOOK_NVTX_SPAM_CALL_COUNT</span></a>. It will not skip core drhook profiling.</p>
<p>This option is only available if NVTX is enabled via <a class="reference internal" href="#dr-hook-nvtx"><span class="std std-ref">DR_HOOK_NVTX</span></a>.</p>
<p><a class="reference internal" href="#dr-hook-nvtx-spam-wt"><span class="std std-ref">DR_HOOK_NVTX_SPAM_WT</span></a> is measured in seconds.</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">0</span></code> will be set to the definition of <code class="docutils literal notranslate"><span class="pre">nvtx_SWT_default</span></code>, typically <code class="docutils literal notranslate"><span class="pre">0.001</span></code>.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<p>If this option isn’t specified, then it will default to the definition of <code class="docutils literal notranslate"><span class="pre">nvtx_SWT_default</span></code>.</p>
</section>
</section>
<section id="dr-hook-opt">
<span id="id227"></span><h2>DR_HOOK_OPT<a class="headerlink" href="#dr-hook-opt" title="Link to this heading"></a></h2>
<section id="id228">
<h3>Valid Values<a class="headerlink" href="#id228" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;option&gt; |  &lt;valid_value&gt; &lt;delim&gt; &lt;option&gt;</div>
<div class="line">delim ::= ‘,’ | ‘ ‘ | ‘t’ | ‘/’</div>
<div class="line">option ::= &lt;all&gt; | &lt;memory&gt; | &lt;heap&gt; | &lt;stack&gt; | &lt;rss&gt; | &lt;paging&gt; |</div>
<div class="line">&lt;walltime&gt; | &lt;cputime&gt; | &lt;count&gt; | &lt;memprof&gt; | &lt;cycles&gt; | &lt;cpuprof&gt; |</div>
<div class="line">&lt;trim&gt; | &lt;self&gt; | &lt;noself&gt; | &lt;noprop&gt; | &lt;nosize&gt; | &lt;cluster&gt; | &lt;callpath&gt;</div>
<div class="line">all ::= ‘ALL’</div>
<div class="line">memory ::= ‘MEM’ | ‘MEMORY’</div>
<div class="line">time ::= ‘TIME’ | ‘TIMES’</div>
<div class="line">heap ::= ‘HWM’ | ‘HEAP’</div>
<div class="line">stack ::= ‘STK’ | ‘STACK’</div>
<div class="line">rss ::= ‘RSS’</div>
<div class="line">paging ::= ‘PAG’ | ‘PAGING’</div>
<div class="line">walltime ::= ‘WALL’ | ‘WALLTIME’</div>
<div class="line">cputime ::= ‘CPU’ | ‘CPUTIME’</div>
<div class="line">count ::= ‘CALLS’ | ‘COUNT’</div>
<div class="line">memprof ::= ‘MEMPROF’</div>
<div class="line">cycles ::= ‘PROF’ | ‘WALLPROF’ | ‘CYCLES’</div>
<div class="line">cpuprof ::= ‘CPUPROF’</div>
<div class="line">trim ::= ‘TRIM’</div>
<div class="line">self ::= ‘SELF’</div>
<div class="line">noself ::= ‘NOSELF’</div>
<div class="line">noprop ::= ‘NOPROP’ | ‘NOPROPAGATE’ | ‘NOPROPAGATE_SIGNALS’</div>
<div class="line">nosize ::= ‘NOSIZE’ | ‘NOSIZEINFO’</div>
<div class="line">cluster ::= ‘CLUSTER’ | ‘CLUSTERINFO’</div>
<div class="line">callpath ::= ‘CALLPATH’</div>
</div>
</section>
<section id="id229">
<h3>Purpose<a class="headerlink" href="#id229" title="Link to this heading"></a></h3>
<p>Specifies a range of options relating to profiling parameters and outputs.</p>
</section>
<section id="id230">
<h3>Notes<a class="headerlink" href="#id230" title="Link to this heading"></a></h3>
<dl>
<dt>begin{itemize}</dt><dd><p>item| all
begin{itemize}</p>
<blockquote>
<div><p>item[] Enables
item | heap
item | stack
item | rss
item | paging
item | walltime
item | cputime
item | cycles
item | count
item Increments any_memstat</p>
</div></blockquote>
<p>end{itemize}
item| memory
begin{itemize}</p>
<blockquote>
<div><p>item[] Enables
item | heap
item | stack
item | rss
item | count
item Increments any_memstat</p>
</div></blockquote>
<p>end{itemize}
item| times
begin{itemize}</p>
<blockquote>
<div><p>item[] Enables
item | walltime
item | cputime
item | count</p>
</div></blockquote>
<p>end{itemize}
item| heap
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Track and print current and max heap memory usage.
item Can also be enabled by <a class="reference internal" href="#dr-hook-funcenter"><span class="std std-ref">DR_HOOK_FUNCENTER</span></a> or <a class="reference internal" href="#dr-hook-funcexit"><span class="std std-ref">DR_HOOK_FUNCEXIT</span></a> being enabled.
item[] Enablesitem | count
item Increments any_memstat</p>
</div></blockquote>
<p>end{itemize}
item| stack
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Track and print current and max stack memory usage.
item Can also be enabled by <a class="reference internal" href="#dr-hook-funcenter"><span class="std std-ref">DR_HOOK_FUNCENTER</span></a> or <a class="reference internal" href="#dr-hook-funcexit"><span class="std std-ref">DR_HOOK_FUNCEXIT</span></a> being enabled.
item[] Enablesitem | count
item Increments any_memstat</p>
</div></blockquote>
<p>end{itemize}
item| rss
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Track and print current and max resident set size.
item[] Enablesitem | count
item Increments any_memstat</p>
</div></blockquote>
<p>end{itemize}
item| paging
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Track and print current number of allocated pages.
item Also tracks the maximum number of pages allocated per drhook region.
item .. todo:: seems to be unimplemented in main
item[] Enables
item | count
item Increments any_memstat</p>
</div></blockquote>
<p>end{itemize}
item| walltime
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Tracks total and per drhook region walltime.
item <code class="docutils literal notranslate"><span class="pre">walltime</span></code> is measured in seconds.
item[] Enables
item | count</p>
</div></blockquote>
<p>end{itemize}
item| cputime
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Tracks total and per drhook region cputime per process.
item <code class="docutils literal notranslate"><span class="pre">cputime</span></code> is measured in CPU ticks.
item Terminated child processes’ time will also be included in this figure, i.e., multiprocessing will be reflected in the count.
item[] Enablesitem | count</p>
</div></blockquote>
<p>end{itemize}
item| count
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Tracks two statistics, the total number of drhook regions entered (<code class="docutils literal notranslate"><span class="pre">calls</span></code>), and how deep drhook is in nested regions (<code class="docutils literal notranslate"><span class="pre">status</span></code>).
item drhook uses <code class="docutils literal notranslate"><span class="pre">status</span></code> purely for tracking if it is currently in a region, and does not care about the depth.</p>
</div></blockquote>
<p>end{itemize}
item| memprof
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item .. todo:: what do?
item unsure, seems to track memory being allocated and freed in regions, but can’t find where it’s called?
item Also adds printing functions to <code class="docutils literal notranslate"><span class="pre">atexit()</span></code>.
item[] Enables
item | heap
item | stack
item | rss
item | paging
item | count
item Increments any_memstat</p>
</div></blockquote>
<p>end{itemize}
item| cycles
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Tracks two statistics, CPU cycles (<code class="docutils literal notranslate"><span class="pre">cycles</span></code>) and walltime (textit{wallprof}) for each drhook region.
item Also adds printing functions to <code class="docutils literal notranslate"><span class="pre">atexit()</span></code>.
item .. todo:: look into child cycles
item[] Enables
item | walltime
item | count
item[] Disables:
item | cpuprof</p>
</div></blockquote>
<p>end{itemize}
item| cpuprof
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item .. todo:: what do?
item seems to be something to do with cpu profiling and keyptr
item could be tracking flops apparently?
item Also adds printing functions to <code class="docutils literal notranslate"><span class="pre">atexit()</span></code>.
item[] Enables
item | cputime
item | count
item[] Disables:
item | cycles</p>
</div></blockquote>
<p>end{itemize}
item| trim
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Trims drhook region names to remove leading spaces and characters after the first subsequent space, e.g. “  Hello World!” becomes “Hello”.
item Also converts drhook region names to upper case.</p>
</div></blockquote>
<p>end{itemize}
% 0=exclude drhook altogether,
% 1=include, but don’t print,
% 2=also print <a href="#id231"><span class="problematic" id="id232">*</span></a>/
item| self
begin{itemize}
% Very expensive! Don’t use this! Include Dr.Hook in the profile output, too</p>
<blockquote>
<div><p>item[] Implements
item .. todo:: Apparently very expensive
item Sets <code class="docutils literal notranslate"><span class="pre">opt_self</span></code> to 2
item 0 = Excludes <code class="docutils literal notranslate"><span class="pre">DrHook</span></code> altogether.
item 1 = Includes <code class="docutils literal notranslate"><span class="pre">DrHook</span></code> in profiling, but doesn’t print it.
item 2 = Includes <code class="docutils literal notranslate"><span class="pre">DrHook</span></code> in profiling, also prints it.
item <code class="docutils literal notranslate"><span class="pre">opt_self</span></code> defaults to 1
item .. todo:: elaborate
% item opt_self = 2;</p>
</div></blockquote>
<p>end{itemize}
item| noself
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Sets <code class="docutils literal notranslate"><span class="pre">opt_self</span></code> to 0
item 0 = Excludes <code class="docutils literal notranslate"><span class="pre">DrHook</span></code> altogether.
item 1 = Includes <code class="docutils literal notranslate"><span class="pre">DrHook</span></code> in profiling, but doesn’t print it.
item 2 = Includes <code class="docutils literal notranslate"><span class="pre">DrHook</span></code> in profiling, also prints it.
item <code class="docutils literal notranslate"><span class="pre">opt_self</span></code> defaults to 1
item .. todo:: elaborate
% item opt_self = 0;</p>
</div></blockquote>
<p>end{itemize}
item| noprop
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Do not propagate handled signals beyond drhook.
% opt_propagate_signals</p>
</div></blockquote>
<p>end{itemize}
item| nosize
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item .. todo:: what do?
item Just says “# of data elements, bytes, etc”
item only examples I can find are ‘0’ or external variables
% item opt_sizeinfo = 0;</p>
</div></blockquote>
<p>end{itemize}
item| cluster
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Prints cluster ID and size.
item .. todo:: elaborate
item seems to be related to process &amp; threads. i.e. (processID, thread count)
% item opt_clusterinfo = 1;</p>
</div></blockquote>
<p>end{itemize}
item| callpath
begin{itemize}</p>
<blockquote>
<div><p>item[] Implements
item Enables callpath mode and associated arguments.
item Creates <em>much</em> more overhead.
item Tracks and outputs the callpath and depth of drhook regions.
item By default, this is to a max depth of 50, but can be changed by <a class="reference internal" href="#dr-hook-callpath-depth"><span class="std std-ref">DR_HOOK_CALLPATH_DEPTH</span></a>.
% item opt_callpath = 1;</p>
</div></blockquote>
<p>end{itemize}</p>
</dd>
</dl>
<p>end{itemize}</p>
</section>
</section>
<section id="dr-hook-callpath-indent">
<span id="id234"></span><h2>DR_HOOK_CALLPATH_INDENT<a class="headerlink" href="#dr-hook-callpath-indent" title="Link to this heading"></a></h2>
<section id="id235">
<h3>Valid Values<a class="headerlink" href="#id235" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’</div>
</div>
</section>
<section id="id236">
<h3>Purpose<a class="headerlink" href="#id236" title="Link to this heading"></a></h3>
<p>Specifies the number of spaces to indent callpath output by.</p>
</section>
<section id="id237">
<h3>Notes<a class="headerlink" href="#id237" title="Link to this heading"></a></h3>
<p>This will only be enabled if <a class="reference internal" href="#dr-hook-opt"><span class="std std-ref">DR_HOOK_OPT</span></a> has <code class="docutils literal notranslate"><span class="pre">CALLPATH</span></code> set.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_CALLPATH_INDENT</span></code> is less than 1 or greater than 8, then it will be set to <code class="docutils literal notranslate"><span class="pre">callpath_indent_default</span></code>, which evaluates to <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">callpath_indent_default</span></code>.</p>
</section>
</section>
<section id="dr-hook-callpath-depth">
<span id="id239"></span><h2>DR_HOOK_CALLPATH_DEPTH<a class="headerlink" href="#dr-hook-callpath-depth" title="Link to this heading"></a></h2>
<section id="id240">
<h3>Valid Values<a class="headerlink" href="#id240" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id241">
<h3>Purpose<a class="headerlink" href="#id241" title="Link to this heading"></a></h3>
<p>Set the maximum depth for tracking callpaths of nested drhook regions.</p>
</section>
<section id="id242">
<h3>Notes<a class="headerlink" href="#id242" title="Link to this heading"></a></h3>
<p>This will only be enabled if <a class="reference internal" href="#dr-hook-opt"><span class="std std-ref">DR_HOOK_OPT</span></a> has <code class="docutils literal notranslate"><span class="pre">CALLPATH</span></code> set.</p>
<p>Caution should be used when picking this value, as being too high will greatly increase both the processing and memory overhead of drhook.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_CALLPATH_DEPTH</span></code> is less than 0, then it will be set to <code class="docutils literal notranslate"><span class="pre">callpath_depth_default</span></code>, which evaluates to <code class="docutils literal notranslate"><span class="pre">50</span></code>. A size of zero will only print the first drhook region in the callpath.</p>
<p>If this option isn’t specified, then it will default to <a href="#id243"><span class="problematic" id="id244">``</span></a>callpath_depth_default``|.</p>
</section>
</section>
<section id="dr-hook-callpath-packed">
<span id="id246"></span><h2>DR_HOOK_CALLPATH_PACKED<a class="headerlink" href="#dr-hook-callpath-packed" title="Link to this heading"></a></h2>
<section id="id247">
<h3>Valid Values<a class="headerlink" href="#id247" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id248">
<h3>Purpose<a class="headerlink" href="#id248" title="Link to this heading"></a></h3>
<p>Outputs callpath information in a more compact format.</p>
</section>
<section id="id249">
<h3>Notes<a class="headerlink" href="#id249" title="Link to this heading"></a></h3>
<p>This will only be enabled if <a class="reference internal" href="#dr-hook-opt"><span class="std std-ref">DR_HOOK_OPT</span></a> has <code class="docutils literal notranslate"><span class="pre">CALLPATH</span></code> set.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-calltrace">
<span id="id252"></span><h2>DR_HOOK_CALLTRACE<a class="headerlink" href="#dr-hook-calltrace" title="Link to this heading"></a></h2>
<section id="id253">
<h3>Valid Values<a class="headerlink" href="#id253" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= ‘0’ | ‘1’</div>
</div>
</section>
<section id="id254">
<h3>Purpose<a class="headerlink" href="#id254" title="Link to this heading"></a></h3>
<p>Specifies if calltrace mode should be enabled or not.</p>
</section>
<section id="id255">
<h3>Notes<a class="headerlink" href="#id255" title="Link to this heading"></a></h3>
<p>This will only be enabled if <a class="reference internal" href="#dr-hook-opt"><span class="std std-ref">DR_HOOK_OPT</span></a> has <code class="docutils literal notranslate"><span class="pre">CALLPATH</span></code> set.</p>
<p>Any non-zero valid integer value will be set to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
</section>
<section id="dr-hook-watch-print-max">
<span id="id258"></span><h2>DR_HOOK_WATCH_PRINT_MAX<a class="headerlink" href="#dr-hook-watch-print-max" title="Link to this heading"></a></h2>
<section id="id259">
<h3>Valid Values<a class="headerlink" href="#id259" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">valid_value ::= &lt;digit&gt; | &lt;valid_value&gt; &lt;digit&gt;</div>
<div class="line">digit ::= ‘0’ | ‘1’ | ‘2’ | ‘3’ | ‘4’ | ‘5’ | ‘6’ | ‘7’ | ‘8’ | ‘9’</div>
</div>
</section>
<section id="id260">
<h3>Purpose<a class="headerlink" href="#id260" title="Link to this heading"></a></h3>
<p>Specifies the max number of elements per array to be printed per watchpoint.</p>
</section>
<section id="id261">
<h3>Notes<a class="headerlink" href="#id261" title="Link to this heading"></a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">DR_HOOK_WATCH_PRINT_MAX</span></code> is greater or equal to 0, and less than the number of elements, then the number of elements up to the value of <code class="docutils literal notranslate"><span class="pre">DR_HOOK_WATCH_PRINT_MAX</span></code> will be printed.</p>
<p>The size is limited to the size of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>If this option isn’t specified, then it will default to <code class="docutils literal notranslate"><span class="pre">-1</span></code>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024-, ECMWF.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
<p>
    <a href="https://www.ecmwf.int/en/accessibility" title="Accessibility">Accessibility</a> -
    <a href="https://www.ecmwf.int/en/privacy" title="Privacy">Privacy</a> -
    <a href="https://www.ecmwf.int/en/terms-use" title="Terms of use">Terms of use</a> -
    <a href="https://www.ecmwf.int/en/about/contact-us" title="Contact us">Contact us</a>
</p>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>